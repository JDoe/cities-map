/*! cities-map - v0.0.1 - 2013-11-15
* https://github.com/TheDahv/cities-map
* Copyright (c) 2013 David Pierce; Licensed MIT */
(function(t,i){i["true"]=t,function(t,i){var n=t.CitiesMap=t.CitiesMap||{},e=n.Data={};e.loadCitiesData=function(t){var n,e;return t=t||{},n={urlBase:"http://swoop.startupweekend.org"},e=i.extend(n,t),i.get(""+e.urlBase+"/cities")}}(window,jQuery),function(t){var i,n=window.google,e=t.CitiesMap=t.CitiesMap||{},a=e.MapApi=function(t,i){return this.mapContainer=t,this.options=i||{},this.mapRef=null,this.mapPoints={},this.writeMapToElement(),this};i=n&&n.maps?n.maps:void 0,i===void 0?window.alert("The Google Maps API is not available at this time. Please try again later"):(a.prototype.writeMapToElement=function(){var t,n,e=this,a=e.mapContainer,o={};return o.center=new i.LatLng(-34.397,150.644),o.zoom=8,o.mapTypeId=i.MapTypeId.ROADMAP,e.mapRef=new i.Map(a[0],o),e.infoWindowInstance=new i.InfoWindow({map:e.mapRef}),n=o.width||a.data("width")||600,t=o.height||a.data("height")||400,a.css("width",n),a.css("height",t),this.mapRef},a.prototype.createCityPoint=function(t,n){var e=new i.Marker({map:this.mapRef,position:new i.LatLng(t.location[0],t.location[1])});return e.addListener("click",n),this.mapPoints[e.__gm_id]=t,e}),a.prototype.getMarkerShowHandler=function(){var t=this,i=t.mapRef,n=t.infoWindowInstance;return function(e){var a=this,o=a.__gm_id,r=t.mapPoints[o];return n.setContent(""+r.city),n.open(i,a),e.stop(),!1}}}(window),function(t,i){var n=i.Data;t.fn.citiesmap=function(e){var a=t(this),o=n.loadCitiesData(e);o.error(function(t){window.alert(t)}),o.success(function(t){var n=new i.MapApi(a,e),o=n.getMarkerShowHandler();t.forEach(function(t){n.createCityPoint.call(n,t,o)})})}}(jQuery,CitiesMap)})({},function(){return this}());